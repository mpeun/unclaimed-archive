<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mein Bildarchiv</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { text-align: center; }
        form, .filter-bar { margin-bottom: 20px; }
        input, textarea, select { width: 100%; margin-bottom: 10px; padding: 8px; }
        button { padding: 10px 15px; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
        .card { border: 1px solid #ccc; padding: 10px; border-radius: 8px; }
        .card img { max-width: 100%; height: auto; }
        .card p { margin: 5px 0; }
    </style>
</head>
<body>

<h1>üìö Mein Bildarchiv</h1>

<form id="imageForm">
    <input type="url" id="imageURL" placeholder="Bild-URL" required>
    <input type="text" id="source" placeholder="Quelle (Source)">
    <input type="date" id="date">
    <textarea id="notes" placeholder="Notizen..."></textarea>
    <button type="submit">Bild hinzuf√ºgen</button>
</form>

<div class="filter-bar">
    <input type="text" id="searchInput" placeholder="Suche...">
    <select id="sourceFilter">
        <option value="">Quelle filtern</option>
    </select>
    <input type="date" id="dateFilter">
    <button type="button" onclick="applyFilters()">Filter anwenden</button>
    <button type="button" onclick="resetFilters()">Filter zur√ºcksetzen</button>
</div>

<div class="gallery" id="gallery"></div>

<script>
    const form = document.getElementById('imageForm');
    const gallery = document.getElementById('gallery');
    const searchInput = document.getElementById('searchInput');
    const sourceFilter = document.getElementById('sourceFilter');
    const dateFilter = document.getElementById('dateFilter');

    let images = JSON.parse(localStorage.getItem('imageArchive')) || [];

    function saveImages() {
        localStorage.setItem('imageArchive', JSON.stringify(images));
    }

    function renderGallery(filtered = images) {
        gallery.innerHTML = '';
        const sources = new Set(images.map(img => img.source).filter(Boolean));
        sourceFilter.innerHTML = '<option value="">Quelle filtern</option>';
        sources.forEach(src => {
            const opt = document.createElement('option');
            opt.value = src;
            opt.textContent = src;
            sourceFilter.appendChild(opt);
        });
        filtered.forEach((img, index) => {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="${img.url}" alt="Bild">
                <p><strong>Quelle:</strong> ${img.source}</p>
                <p><strong>Datum:</strong> ${img.date}</p>
                <p><strong>Notizen:</strong> ${img.notes}</p>
                <button onclick="deleteImage(${index})">üóëÔ∏è L√∂schen</button>
            `;
            gallery.appendChild(card);
        });
    }

    function deleteImage(index) {
        images.splice(index, 1);
        saveImages();
        renderGallery();
    }

    form.addEventListener('submit', e => {
        e.preventDefault();
        const newImage = {
            url: form.imageURL.value,
            source: form.source.value,
            date: form.date.value,
            notes: form.notes.value
        };
        images.push(newImage);
        saveImages();
        renderGallery();
        form.reset();
    });

    function applyFilters() {
        const search = searchInput.value.toLowerCase();
        const src = sourceFilter.value;
        const date = dateFilter.value;
        const filtered = images.filter(img => {
            return (
                (!search || img.notes.toLowerCase().includes(search) || img.source.toLowerCase().includes(search)) &&
                (!src || img.source === src) &&
                (!date || img.date === date)
            );
        });
        renderGallery(filtered);
    }

    function resetFilters() {
        searchInput.value = '';
        sourceFilter.value = '';
        dateFilter.value = '';
        renderGallery();
    }

    renderGallery();
</script>

</body>
</html>
